# Tests in GladIA

> How to run tests

The easiest way is by doing : `cd src ; python -m pytest ./`

You can add the following flags :
- To test only the default models : `--default-models-only`
- To test only the default inputs : `--default-inputs-only`
- To run only the mandatory tests : `-m mandatory`
- To deactivate autogenerated tests : `-m not autogenerated`
- To run a specific suite of test : `-k some-pattern-to-find`

Pattern should be like :
1. Looking for input pattern
- Pattern: `Inputmodality`
- Example: `Text` to test all Text to Text, Text to Image, Text to Video, Text to Audio similar to /text/* api endpoints

2. Looking for input / output pattern
- `InputmodalityOutputmodality`
- Example: `TextText` to test all Text to Text similar to /text/text/* api endpoints
- `python -m pytest ./ -k TextText`

3. Looking for task pattern
- `InputmodalityOutputmodalityTask`
- Example: `TextTextSentimentAnalysis` to test all Text to Text Sentiment Analysis models similar to /text/text/sentiment-analysis api endpoints
- `python -m pytest ./ -k TextTextSentimentAnalysis`

4. Looking for model pattern
- `InputmodalityOutputmodalityTaskModel-name`
- Example: `TextTextSentimentAnalysis` to test all Text to Text Sentiment Analysis models similar to /text/text/sentiment-analysis/?model=my-model api endpoints
- `python -m pytest ./ -k TextTextSentimentAnalysiszero -k my-model`



> How add tests for a new task

By default, a suite of tests will be autogenerated for your new task as long as you provide a `.task_metadata.yaml` file.\

If you need to add a custom test for your task, create a file named `test_[name_of_your_task].py` and create a test suite inheriting 
from [create_default_tests](https://github.com/gladiaio/gladia/blob/main/src/tests/default_tests.py#L274) and add your custom tests ([i.e](https://github.com/gladiaio/gladia/blob/9a012762ee2ebafcdd8f6e25b4a712f12aecade1/src/apis/text/text/next-word-prediction-models/test_next_word_prediction.py)).

<br/>

> How add tests for my model

If your model is withing an already existing task you have nothing to do.\
A test suite is specific to a task and not to a model, meaning each models within a task will be tested with the same test suite.
